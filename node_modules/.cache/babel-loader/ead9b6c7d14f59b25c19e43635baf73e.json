{"ast":null,"code":"import _slicedToArray from\"C:/Users/Valeria Rico/Documents/Alkemy/React II/Proyecto React II/Proyecto Avengers/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect}from\"react\";import{useSelector,useDispatch}from\"react-redux\";import Skeleton from\"react-loading-skeleton\";import{Radio,RadioGroup,FormControl,FormControlLabel}from\"@mui/material\";import debounce from\"lodash.debounce\";import\"react-loading-skeleton/dist/skeleton.css\";import{Link}from\"react-router-dom\";import\"./Tasks.styles.css\";import{getTasks,deleteTask,editTaskStatus,editTaskPriority}from\"../../../store/actions/tasksActions\";import{useResize}from\"../../../hooks/useResize\";import{Header}from\"../../Header/Header\";import{Card}from\"../../Card/Card\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";export var Tasks=function Tasks(){var _useState=useState(null),_useState2=_slicedToArray(_useState,2),list=_useState2[0],setList=_useState2[1];var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),renderList=_useState4[0],setRenderList=_useState4[1];var _useState5=useState(\"ALL\"),_useState6=_slicedToArray(_useState5,2),tasksfromWho=_useState6[0],setTasksfromWho=_useState6[1];var _useResize=useResize(),isPhone=_useResize.isPhone;var _useState7=useState(\"\"),_useState8=_slicedToArray(_useState7,2),search=_useState8[0],setSearch=_useState8[1];var dispatch=useDispatch();useEffect(function(){dispatch(getTasks(tasksfromWho===\"ME\"?\"me\":\"\"));},[tasksfromWho,dispatch]);var _useSelector=useSelector(function(state){return state.tasksReducer;}),tasks=_useSelector.tasks,error=_useSelector.error,loading=_useSelector.loading;useEffect(function(){if(tasks!==null&&tasks!==void 0&&tasks.length){setList(tasks);setRenderList(tasks);}},[tasks]);useEffect(function(){if(search)setRenderList(list.filter(function(data){return data.title.startsWith(search);}));else setRenderList(list);},[search,list]);var renderAllCards=function renderAllCards(){return renderList===null||renderList===void 0?void 0:renderList.map(function(data){return/*#__PURE__*/_jsx(Card,{data:data,deleteCard:handleDelete,editCardStatus:handleEditCardStatus,editCardPriority:handleEditCardPriority},data.id);});};var renderColumnCards=function renderColumnCards(text){return renderList===null||renderList===void 0?void 0:renderList.filter(function(data){return data.status===text;}).map(function(data){return/*#__PURE__*/_jsx(Card,{data:data,deleteCard:handleDelete,editCardStatus:handleEditCardStatus,editCardPriority:handleEditCardPriority},data.id);});};var handleChangeImportance=function handleChangeImportance(event){if(event.currentTarget.value===\"ALL\")setRenderList(list);else setRenderList(list.filter(function(data){return data.importance===event.currentTarget.value;}));};var handleSearch=debounce(function(event){var _event$target;setSearch(event===null||event===void 0?void 0:(_event$target=event.target)===null||_event$target===void 0?void 0:_event$target.value);},1000);var handleDelete=function handleDelete(id){dispatch(deleteTask(id));};var handleEditCardStatus=function handleEditCardStatus(data){dispatch(editTaskStatus(data));};var handleEditCardPriority=function handleEditCardPriority(data){dispatch(editTaskPriority(data));};if(error)return/*#__PURE__*/_jsx(\"div\",{children:\"Hay un error\"});return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Header,{}),/*#__PURE__*/_jsx(\"main\",{id:\"tasks\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"wrapper_list\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"list_header\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Mis Estrategias\"}),/*#__PURE__*/_jsx(\"button\",{children:/*#__PURE__*/_jsx(Link,{to:\"/newTask\",children:\"Crear estrategia\"})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"filters\",children:[/*#__PURE__*/_jsx(FormControl,{children:/*#__PURE__*/_jsxs(RadioGroup,{row:true,\"aria-labelledby\":\"demo-row-radio-buttons-group-label\",onChange:function onChange(event){return setTasksfromWho(event.currentTarget.value);},children:[/*#__PURE__*/_jsx(FormControlLabel,{value:\"ALL\",control:/*#__PURE__*/_jsx(Radio,{}),label:\"Todas\"}),/*#__PURE__*/_jsx(FormControlLabel,{value:\"ME\",control:/*#__PURE__*/_jsx(Radio,{}),label:\"Mis estrategias\"})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"search\",children:/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Buscar por t\\xEDtulo...\",onChange:handleSearch})}),/*#__PURE__*/_jsxs(\"select\",{name:\"importance\",onChange:handleChangeImportance,children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Elige una prioridad\"}),/*#__PURE__*/_jsx(\"option\",{value:\"All\",children:\"Todas\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Low\",children:\"Baja\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Medium\",children:\"Media\"}),/*#__PURE__*/_jsx(\"option\",{value:\"High\",children:\"Alta\"})]})]}),isPhone?!(renderList!==null&&renderList!==void 0&&renderList.length)?/*#__PURE__*/_jsx(\"div\",{children:\"No hay tareas creadas\"}):loading?/*#__PURE__*/_jsx(Skeleton,{}):/*#__PURE__*/_jsx(\"div\",{className:\"list phone\",children:renderAllCards()}):/*#__PURE__*/_jsx(\"div\",{className:\"list_group\",children:!(renderList!==null&&renderList!==void 0&&renderList.length)?/*#__PURE__*/_jsx(\"div\",{children:\"No hay tareas creadas\"}):loading?/*#__PURE__*/_jsx(Skeleton,{}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"list\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Nuevas\"}),renderColumnCards(\"New\")]}),/*#__PURE__*/_jsxs(\"div\",{className:\"list\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"En proceso\"}),renderColumnCards(\"In process\")]}),/*#__PURE__*/_jsxs(\"div\",{className:\"list\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Finalizadas\"}),renderColumnCards(\"Finished\")]})]})})]})})]});};","map":{"version":3,"names":["React","useState","useEffect","useSelector","useDispatch","Skeleton","Radio","RadioGroup","FormControl","FormControlLabel","debounce","Link","getTasks","deleteTask","editTaskStatus","editTaskPriority","useResize","Header","Card","Tasks","list","setList","renderList","setRenderList","tasksfromWho","setTasksfromWho","isPhone","search","setSearch","dispatch","state","tasksReducer","tasks","error","loading","length","filter","data","title","startsWith","renderAllCards","map","handleDelete","handleEditCardStatus","handleEditCardPriority","id","renderColumnCards","text","status","handleChangeImportance","event","currentTarget","value","importance","handleSearch","target"],"sources":["C:/Users/Valeria Rico/Documents/Alkemy/React II/Proyecto React II/Proyecto Avengers/client/src/components/views/Tasks/Tasks.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport { useSelector, useDispatch } from \"react-redux\";\r\nimport Skeleton from \"react-loading-skeleton\";\r\nimport {\r\n  Radio,\r\n  RadioGroup,\r\n  FormControl,\r\n  FormControlLabel,\r\n} from \"@mui/material\";\r\nimport debounce from \"lodash.debounce\";\r\nimport \"react-loading-skeleton/dist/skeleton.css\";\r\nimport { Link } from \"react-router-dom\";\r\nimport \"./Tasks.styles.css\";\r\nimport {\r\n  getTasks,\r\n  deleteTask,\r\n  editTaskStatus,\r\n  editTaskPriority,\r\n} from \"../../../store/actions/tasksActions\";\r\nimport { useResize } from \"../../../hooks/useResize\";\r\nimport { Header } from \"../../Header/Header\";\r\nimport { Card } from \"../../Card/Card\";\r\n\r\nexport const Tasks = () => {\r\n  const [list, setList] = useState(null);\r\n  const [renderList, setRenderList] = useState(null);\r\n  const [tasksfromWho, setTasksfromWho] = useState(\"ALL\");\r\n  const { isPhone } = useResize();\r\n  const [search, setSearch] = useState(\"\");\r\n  const dispatch = useDispatch();\r\n\r\n  useEffect(() => {\r\n    dispatch(getTasks(tasksfromWho === \"ME\" ? \"me\" : \"\"));\r\n  }, [tasksfromWho, dispatch]);\r\n\r\n  const { tasks, error, loading } = useSelector((state) => {\r\n    return state.tasksReducer;\r\n  });\r\n\r\n  useEffect(() => {\r\n    if (tasks?.length) {\r\n      setList(tasks);\r\n      setRenderList(tasks);\r\n    } \r\n  }, [tasks]);\r\n\r\n  useEffect(() => {\r\n    if (search)\r\n      setRenderList(list.filter((data) => data.title.startsWith(search)));\r\n    else setRenderList(list);\r\n  }, [search, list]);\r\n\r\n  const renderAllCards = () => {\r\n    return renderList?.map((data) => (\r\n      <Card\r\n        key={data.id}\r\n        data={data}\r\n        deleteCard={handleDelete}\r\n        editCardStatus={handleEditCardStatus}\r\n        editCardPriority={handleEditCardPriority}\r\n      />\r\n    ));\r\n  };\r\n\r\n  const renderColumnCards = (text) => {\r\n    return renderList\r\n      ?.filter((data) => data.status === text)\r\n      .map((data) => (\r\n        <Card\r\n          key={data.id}\r\n          data={data}\r\n          deleteCard={handleDelete}\r\n          editCardStatus={handleEditCardStatus}\r\n          editCardPriority={handleEditCardPriority}\r\n        />\r\n      ));\r\n  };\r\n\r\n  const handleChangeImportance = (event) => {\r\n    if (event.currentTarget.value === \"ALL\") setRenderList(list);\r\n    else\r\n      setRenderList(\r\n        list.filter((data) => data.importance === event.currentTarget.value)\r\n      );\r\n  };\r\n\r\n  const handleSearch = debounce((event) => {\r\n    setSearch(event?.target?.value);\r\n  }, 1000);\r\n\r\n  const handleDelete = (id) => {\r\n    dispatch(deleteTask(id));\r\n  };\r\n\r\n  const handleEditCardStatus = (data) => {\r\n    dispatch(editTaskStatus(data));\r\n  };\r\n\r\n  const handleEditCardPriority = (data) => {\r\n    dispatch(editTaskPriority(data));\r\n  }\r\n\r\n  if (error) return <div>Hay un error</div>;\r\n\r\n  return (\r\n    <>\r\n      <Header />\r\n      <main id=\"tasks\">\r\n          <div className=\"wrapper_list\">\r\n          <div className=\"list_header\">\r\n            <h2>Mis Estrategias</h2>\r\n            <button><Link to='/newTask'>Crear estrategia</Link></button>\r\n          </div>\r\n          \r\n          <div className=\"filters\">\r\n            <FormControl>\r\n              <RadioGroup\r\n                row\r\n                aria-labelledby=\"demo-row-radio-buttons-group-label\"\r\n                onChange={(event) => setTasksfromWho(event.currentTarget.value)}\r\n              >\r\n                <FormControlLabel\r\n                  value=\"ALL\"\r\n                  control={<Radio />}\r\n                  label=\"Todas\"\r\n                />\r\n                <FormControlLabel\r\n                  value=\"ME\"\r\n                  control={<Radio />}\r\n                  label=\"Mis estrategias\"\r\n                />\r\n              </RadioGroup>\r\n            </FormControl>\r\n            <div className=\"search\">\r\n              <input\r\n                type=\"text\"\r\n                placeholder=\"Buscar por título...\"\r\n                onChange={handleSearch}\r\n              />\r\n            </div>\r\n            <select name=\"importance\" onChange={handleChangeImportance}>\r\n              <option value=\"\">Elige una prioridad</option>\r\n              <option value=\"All\">Todas</option>\r\n              <option value=\"Low\">Baja</option>\r\n              <option value=\"Medium\">Media</option>\r\n              <option value=\"High\">Alta</option>\r\n            </select>\r\n           \r\n          </div>\r\n          {isPhone ? (\r\n            !renderList?.length ? (\r\n              <div>No hay tareas creadas</div>\r\n            ) : loading ? (\r\n              <Skeleton />\r\n            ) : (\r\n              <div className=\"list phone\">{renderAllCards()}</div>\r\n            )\r\n          ) : (\r\n            <div className=\"list_group\">\r\n              {!renderList?.length ?  (\r\n                <div>No hay tareas creadas</div>\r\n              ) : loading ? (\r\n                <Skeleton />\r\n              ) : (\r\n                <>\r\n                  <div className=\"list\">\r\n                    <h3>Nuevas</h3>\r\n                    {renderColumnCards(\"New\")}\r\n                  </div>\r\n                  <div className=\"list\">\r\n                    <h3>En proceso</h3>\r\n                    {renderColumnCards(\"In process\")}\r\n                  </div>\r\n                  <div className=\"list\">\r\n                    <h3>Finalizadas</h3>\r\n                    {renderColumnCards(\"Finished\")}\r\n                  </div>\r\n                </>\r\n              )}\r\n            </div>\r\n          )}\r\n        </div>\r\n      </main>\r\n    </>\r\n  );\r\n};\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}