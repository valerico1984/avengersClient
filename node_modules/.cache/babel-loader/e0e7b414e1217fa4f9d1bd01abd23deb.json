{"ast":null,"code":"import{TASKS_REQUEST,TASKS_SUCCESS,TASKS_FAILURE}from\"../types\";import axios from'axios';export var tasksRequest=function tasksRequest(){return{type:TASKS_REQUEST};};export var tasksSuccess=function tasksSuccess(data){return{type:TASKS_SUCCESS,payload:data};};export var tasksFailure=function tasksFailure(error){return{type:TASKS_FAILURE,payload:error};};var me={userId:localStorage.getItem(\"userId\"),userName:localStorage.getItem(\"userName\")};export var getTasks=function getTasks(path){return function(dispatch){var token=localStorage.getItem('token');dispatch(tasksRequest());if(path==='me'){axios.get(\"api/task/list/\".concat(me.userId),{headers:{'Authorization':\"Bearer \".concat(token)}}).then(function(response){var data=response.data;dispatch(tasksSuccess(data));}).catch(function(error){return dispatch(tasksFailure(error));});}if(path===''){axios.get(\"api/task/list\",{headers:{'Authorization':\"Bearer \".concat(token)}}).then(function(response){var data=response.data;dispatch(tasksSuccess(data));}).catch(function(error){return dispatch(tasksFailure(error));});}};};export var deleteTask=function deleteTask(id){return function(dispatch){var token=localStorage.getItem('token');axios.get(\"api/task/delete/\".concat(id),{headers:{'Authorization':\"Bearer \".concat(token)}}).then(function(data){console.log(data);dispatch(getTasks(\"\"));}).catch(function(error){return dispatch(tasksFailure(error));});};};export var editTaskStatus=function editTaskStatus(data){return function(dispatch){var statusArray=[\"New\",\"In process\",\"Finished\"];var token=localStorage.getItem('token');var newStatusIndex=statusArray.indexOf(data.status)>1?0:statusArray.indexOf(data.status)+1;axios.patch(\"api/task/update/\".concat(data.id),{title:data.title,importance:data.importance,status:statusArray[newStatusIndex],description:data.description,userName:data.userName,userId:data.userId},{headers:{'Authorization':\"Bearer \".concat(token)}}).then(function(data){return dispatch(getTasks(\"\"));}).catch(function(error){return dispatch(tasksFailure(error));});};};export var editTaskPriority=function editTaskPriority(data){return function(dispatch){var priorityArray=[\"Low\",\"Medium\",\"High\"];var token=localStorage.getItem('token');var newPriorityIndex=priorityArray.indexOf(data.importance)>1?0:priorityArray.indexOf(data.importance)+1;axios.patch(\"api/task/update/\".concat(data.id),{title:data.title,importance:priorityArray[newPriorityIndex],status:data.status,description:data.description,userName:data.userName,userId:data.userId},{headers:{'Authorization':\"Bearer \".concat(token)}}).then(function(data){return dispatch(getTasks(\"\"));}).catch(function(error){return dispatch(tasksFailure(error));});};};","map":{"version":3,"names":["TASKS_REQUEST","TASKS_SUCCESS","TASKS_FAILURE","axios","tasksRequest","type","tasksSuccess","data","payload","tasksFailure","error","me","userId","localStorage","getItem","userName","getTasks","path","dispatch","token","get","headers","then","response","catch","deleteTask","id","console","log","editTaskStatus","statusArray","newStatusIndex","indexOf","status","patch","title","importance","description","editTaskPriority","priorityArray","newPriorityIndex"],"sources":["C:/Users/Valeria Rico/Documents/Alkemy/React II/Proyecto React II/Proyecto Avengers/client/src/store/actions/tasksActions.js"],"sourcesContent":["import { TASKS_REQUEST, TASKS_SUCCESS, TASKS_FAILURE } from \"../types\"\r\nimport axios from 'axios'\r\n\r\n\r\n\r\nexport const tasksRequest = () => ({\r\n   type: TASKS_REQUEST,\r\n})\r\n\r\nexport const tasksSuccess = data => ({\r\n   type: TASKS_SUCCESS,\r\n   payload: data,\r\n})\r\n\r\nexport const tasksFailure = error => ({\r\n   type: TASKS_FAILURE,\r\n   payload: error,\r\n})\r\n\r\nconst me = {userId: localStorage.getItem(\"userId\"), userName: localStorage.getItem(\"userName\")};\r\n\r\n\r\nexport const getTasks = path => dispatch =>{\r\n   const token = localStorage.getItem('token')\r\n   dispatch(tasksRequest())\r\n\r\n   if (path==='me'){\r\n   axios.get(`api/task/list/${me.userId}`, {\r\n       headers:  {\r\n         'Authorization': `Bearer ${token}`,\r\n        }            \r\n         \r\n     \r\n   })\r\n      .then(response => {\r\n      \r\n         const data = response.data\r\n         dispatch(tasksSuccess(data))\r\n        })\r\n      \r\n      .catch(error => dispatch(tasksFailure(error)))\r\n} \r\n\r\nif (path===''){\r\n   axios.get(`api/task/list`, {\r\n      headers:  {\r\n        'Authorization': `Bearer ${token}`,\r\n       }            \r\n        \r\n    \r\n  })\r\n     .then(response => {\r\n        const data = response.data\r\n        dispatch(tasksSuccess(data))\r\n     })\r\n     .catch(error => dispatch(tasksFailure(error)))\r\n\r\n\r\n}\r\n}\r\nexport const deleteTask = id => dispatch => {\r\n   const token = localStorage.getItem('token')\r\n   axios.get(`api/task/delete/${id}`, {\r\n       headers:  {\r\n         'Authorization': `Bearer ${token}`,\r\n        }            \r\n         \r\n     })\r\n      .then(data => {\r\n         \r\n      console.log(data)\r\n         dispatch(getTasks(\"\"))}\r\n         )\r\n      .catch(error => dispatch(tasksFailure(error)))\r\n\r\n}\r\n\r\nexport const editTaskStatus = data => dispatch => {\r\n   const statusArray = [\"New\", \"In process\", \"Finished\"]\r\n   const token = localStorage.getItem('token')\r\n\r\n   const newStatusIndex =\r\n      statusArray.indexOf(data.status) > 1\r\n         ? 0\r\n         : statusArray.indexOf(data.status) + 1\r\n\r\n   axios.patch(`api/task/update/${data.id}`,\r\n      {title: data.title,\r\n      importance: data.importance,\r\n      status: statusArray[newStatusIndex],\r\n      description: data.description,\r\n      userName: data.userName,\r\n      userId: data.userId},\r\n       {\r\n      headers:  {\r\n         'Authorization': `Bearer ${token}`,\r\n        }            \r\n         \r\n      })\r\n      \r\n      .then(data => dispatch(getTasks(\"\")))\r\n      .catch(error => dispatch(tasksFailure(error)))\r\n}\r\n\r\nexport const editTaskPriority = data => dispatch => {\r\n   const priorityArray = [\"Low\", \"Medium\", \"High\"]\r\n   const token = localStorage.getItem('token')\r\n\r\n   const newPriorityIndex =\r\n      priorityArray.indexOf(data.importance) > 1\r\n         ? 0\r\n         : priorityArray.indexOf(data.importance) + 1\r\n\r\n   axios.patch(`api/task/update/${data.id}`,\r\n      {title: data.title,\r\n      importance: priorityArray[newPriorityIndex],\r\n      status: data.status,\r\n      description: data.description,\r\n      userName: data.userName,\r\n      userId: data.userId},\r\n       {\r\n      headers:  {\r\n         'Authorization': `Bearer ${token}`,\r\n        }            \r\n         \r\n      })\r\n      \r\n      .then(data => dispatch(getTasks(\"\")))\r\n      .catch(error => dispatch(tasksFailure(error)))\r\n}"],"mappings":"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"},"metadata":{},"sourceType":"module"}