{"ast":null,"code":"import _slicedToArray from\"C:/Users/Valeria Rico/Documents/Alkemy/React II/Proyecto React II/Proyecto Avengers/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect}from\"react\";import{useFormik}from\"formik\";import{useNavigate,Link}from\"react-router-dom\";import*as Yup from\"yup\";import{swal}from\"../../../../utils/swal\";import axios from'axios';import\"../Auth.styles.css\";import blackwidow from'../../../../img/blackWidow.png';import spiderman from'../../../../img/spiderman.png';import ironman from'../../../../img/ironman.png';import hulk from'../../../../img/hulk.png';import hawkeye from'../../../../img/hawkeye.png';import captainAmerica from'../../../../img/captainAmerica.png';import avengers from'../../../../img/avengers.png';import thor from'../../../../img/thor.png';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var API_ENDPOINT=process.env.REACT_APP_API_ENDPOINT;export var Login=function Login(){var navigate=useNavigate();var _useState=useState([]),_useState2=_slicedToArray(_useState,2),data=_useState2[0],setData=_useState2[1];var initialValues={userName:\"avengers\",password:\"\"};useEffect(function(){axios.get(\"\".concat(API_ENDPOINT,\"api/result\")).then(function(result){setData(result.data);});},[setData]);var required=\"* Campo obligatorio\";var validationSchema=function validationSchema(){return Yup.object().shape({userName:Yup.string().min(4,\"La cantidad mínima de caracteres es 4\").required(required),password:Yup.string().required(required)});};var onSubmit=function onSubmit(){var userName=values.userName,password=values.password;axios.post(\"\".concat(API_ENDPOINT,\"api/login\"),{userName:userName,password:password}).then(function(response){if(response.status===200){var _response$data,_response$data2,_response$data3;localStorage.setItem(\"token\",response===null||response===void 0?void 0:(_response$data=response.data)===null||_response$data===void 0?void 0:_response$data.token);localStorage.setItem(\"userId\",response===null||response===void 0?void 0:(_response$data2=response.data)===null||_response$data2===void 0?void 0:_response$data2.userId);localStorage.setItem(\"userName\",response===null||response===void 0?void 0:(_response$data3=response.data)===null||_response$data3===void 0?void 0:_response$data3.userName);navigate(\"/\",{replace:true});}}).catch(function(error){swal();});};var formik=useFormik({initialValues:initialValues,validationSchema:validationSchema,onSubmit:onSubmit});var handleSubmit=formik.handleSubmit,handleChange=formik.handleChange,errors=formik.errors,touched=formik.touched,handleBlur=formik.handleBlur,values=formik.values;var renderAvenger=function renderAvenger(){switch(values.userName){case'Spider Man':return/*#__PURE__*/_jsx(\"img\",{src:spiderman,className:\"equipo scale-up-center\",alt:\"spiderman\"});case'Black Widow':return/*#__PURE__*/_jsx(\"img\",{src:blackwidow,className:\"equipo scale-up-center\",alt:\"blackwidow\"});case'Iron Man':return/*#__PURE__*/_jsx(\"img\",{src:ironman,className:\"equipo scale-up-center\",alt:\"ironman\"});case'Hawk Eye':return/*#__PURE__*/_jsx(\"img\",{src:hawkeye,className:\"equipo scale-up-center\",alt:\"hawkeye\"});case'Thor':return/*#__PURE__*/_jsx(\"img\",{src:thor,className:\"equipo scale-up-center\",alt:\"thor\"});case'Capitán América':return/*#__PURE__*/_jsx(\"img\",{src:captainAmerica,className:\"equipo scale-up-center\",alt:\"captainAmerica\"});case'Hulk':return/*#__PURE__*/_jsx(\"img\",{src:hulk,className:\"equipo scale-up-center\",alt:\"hulk\"});default:return/*#__PURE__*/_jsx(\"img\",{src:avengers,className:\"equipo scale-up-center\",alt:\"avengers\"});}};return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"wrapperLogin\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"equipo\",children:renderAvenger(values.userName)}),/*#__PURE__*/_jsx(\"div\",{className:\"auth\",children:/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(\"h1\",{children:\" \\xA1Bienvenid@, Avenger!\"}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{children:\"\\xBFQui\\xE9n eres?\"}),/*#__PURE__*/_jsxs(\"select\",{name:\"userName\",onChange:handleChange,value:values.userName,className:errors.userName&&touched.userName?\"error\":\"\",onBlur:handleBlur,children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Selecciona tu nombre...\"}),data===null||data===void 0?void 0:data.map(function(option,id){return/*#__PURE__*/_jsx(\"option\",{value:option.userName,children:option.userName},id);})]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{children:\"Contrase\\xF1a\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",name:\"password\",onChange:handleChange,value:values.password,onBlur:handleBlur,className:errors.password&&touched.password?\"error\":\"\"}),errors.password&&touched.password&&/*#__PURE__*/_jsx(\"div\",{children:errors.password})]}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"button\",{type:\"submit\",children:\"Enviar\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"wrapperList\",children:[/*#__PURE__*/_jsx(\"h5\",{style:{textAlign:'center',margin:'20px 0 10px 0 ',padding:'0'},children:\"\\xBFA\\xFAn no configuraste tu cuenta?\"}),/*#__PURE__*/_jsx(Link,{to:\"/register\",children:\"Registrate\"})]})]})})]})});};","map":{"version":3,"names":["React","useState","useEffect","useFormik","useNavigate","Link","Yup","swal","axios","blackwidow","spiderman","ironman","hulk","hawkeye","captainAmerica","avengers","thor","API_ENDPOINT","process","env","REACT_APP_API_ENDPOINT","Login","navigate","data","setData","initialValues","userName","password","get","then","result","required","validationSchema","object","shape","string","min","onSubmit","values","post","response","status","localStorage","setItem","token","userId","replace","catch","error","formik","handleSubmit","handleChange","errors","touched","handleBlur","renderAvenger","map","option","id","textAlign","margin","padding"],"sources":["C:/Users/Valeria Rico/Documents/Alkemy/React II/Proyecto React II/Proyecto Avengers/client/src/components/views/auth/Login/Login.js"],"sourcesContent":["import React, {useState, useEffect} from \"react\";\r\nimport { useFormik } from \"formik\";\r\nimport { useNavigate, Link } from \"react-router-dom\";\r\nimport * as Yup from \"yup\";\r\nimport { swal } from \"../../../../utils/swal\";\r\nimport axios from 'axios';\r\nimport \"../Auth.styles.css\";\r\nimport blackwidow from '../../../../img/blackWidow.png'\r\nimport spiderman from '../../../../img/spiderman.png'\r\nimport ironman from '../../../../img/ironman.png'\r\nimport hulk from '../../../../img/hulk.png'\r\nimport hawkeye from '../../../../img/hawkeye.png'\r\nimport captainAmerica from '../../../../img/captainAmerica.png'\r\nimport avengers from '../../../../img/avengers.png'\r\nimport thor from '../../../../img/thor.png'\r\n\r\nconst { REACT_APP_API_ENDPOINT: API_ENDPOINT } = process.env;\r\n\r\n\r\n\r\nexport const Login = () => {\r\n  const navigate = useNavigate();\r\n  \r\n  const [data, setData] = useState([]);\r\n\r\n  const initialValues = {\r\n    userName: \"avengers\",\r\n    password: \"\",\r\n  }\r\n\r\n  useEffect(() => {\r\n    axios.get(`${API_ENDPOINT}api/result`)\r\n    \r\n        .then((result) => {\r\n          setData(result.data)}\r\n        );\r\n  }, [setData]);\r\n\r\n\r\n  const required = \"* Campo obligatorio\";\r\n\r\n  const validationSchema = () =>\r\n    Yup.object().shape({\r\n      userName: Yup.string()\r\n        .min(4, \"La cantidad mínima de caracteres es 4\")\r\n        .required(required),\r\n      password: Yup.string().required(required),\r\n    });\r\n\r\n\r\n  const onSubmit = () => {\r\n\r\n    const {userName, password} = values\r\n \r\n\r\n   axios.post(`${API_ENDPOINT}api/login`, {\r\n        userName,\r\n        password,\r\n      })\r\n      .then((response) => {\r\n        \r\n        if (response.status === 200) {\r\n          localStorage.setItem(\"token\", response?.data?.token);\r\n          localStorage.setItem(\"userId\", response?.data?.userId);\r\n          localStorage.setItem(\"userName\", response?.data?.userName);\r\n          navigate(\"/\", { replace: true });\r\n        } \r\n    \r\n      \r\n      })\r\n              .catch(function(error){\r\n                \r\n                 swal()\r\n              }\r\n           \r\n              )\r\n        }\r\n     \r\n     \r\n    \r\n\r\n  const formik = useFormik({ initialValues, validationSchema, onSubmit });\r\n\r\n  const { handleSubmit, handleChange, errors, touched, handleBlur, values } =\r\n    formik;\r\n\r\n  \r\n    const renderAvenger=() =>{\r\n      switch(values.userName){\r\n        case 'Spider Man':\r\n          return <img src={spiderman} className='equipo scale-up-center' alt='spiderman'/>;\r\n       case 'Black Widow':\r\n            return <img src={blackwidow} className='equipo scale-up-center' alt='blackwidow'/>;  \r\n            case 'Iron Man':\r\n            return <img src={ironman} className='equipo scale-up-center'alt='ironman'/>; \r\n            case 'Hawk Eye':\r\n            return <img src={hawkeye} className='equipo scale-up-center' alt='hawkeye'/>; \r\n            case 'Thor':\r\n            return <img src={thor} className='equipo scale-up-center' alt='thor'/>; \r\n            case 'Capitán América':\r\n            return <img src={captainAmerica} className='equipo scale-up-center' alt='captainAmerica'/>; \r\n            case 'Hulk':\r\n            return <img src={hulk} className='equipo scale-up-center'alt='hulk'/>; \r\n            default:\r\n              return <img src={avengers} className='equipo scale-up-center' alt='avengers'/>;\r\n      }\r\n      \r\n    }\r\n  \r\n\r\n  return (\r\n    <>\r\n       \r\n    <div className='wrapperLogin'>\r\n      <div className='equipo'>\r\n        {renderAvenger(values.userName)}   \r\n        </div>\r\n       <div className=\"auth\">\r\n      \r\n        <form onSubmit={handleSubmit}>\r\n          <h1> ¡Bienvenid@, Avenger!</h1>\r\n          <div>\r\n            <label>¿Quién eres?</label>\r\n            <select\r\n            name=\"userName\"\r\n            onChange={handleChange}\r\n            value={values.userName}\r\n            className={errors.userName && touched.userName ? \"error\" : \"\"}\r\n            onBlur={handleBlur}\r\n          >\r\n            <option value=\"\">Selecciona tu nombre...</option>\r\n            {data?.map((option, id) => {\r\n            return(\r\n                <option key={id} value={option.userName}>\r\n                {option.userName}\r\n              </option>)\r\n})}\r\n          </select>\r\n          </div>\r\n          <div>\r\n            <label>Contraseña</label>\r\n            <input\r\n              type=\"password\"\r\n              name=\"password\"\r\n              onChange={handleChange}\r\n              value={values.password}\r\n              onBlur={handleBlur}\r\n              className={errors.password && touched.password ? \"error\" : \"\"}\r\n            />\r\n            {errors.password && touched.password && (\r\n              <div>{errors.password}</div>\r\n            )}\r\n          </div>\r\n          <div>\r\n            <button type=\"submit\">Enviar</button>\r\n            \r\n          </div>\r\n          <div className='wrapperList'>\r\n            <h5 style={{textAlign: 'center', margin:'20px 0 10px 0 ', padding: '0'}}>¿Aún no configuraste tu cuenta?</h5>\r\n            <Link to=\"/register\">Registrate</Link>\r\n          </div>\r\n        </form>\r\n      </div>\r\n    </div>\r\n    </>\r\n  );\r\n};\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}