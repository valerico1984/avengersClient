{"ast":null,"code":"import { TASKS_REQUEST, TASKS_SUCCESS, TASKS_FAILURE } from \"../types\";\nimport axios from 'axios';\nconst {\n  REACT_APP_API_ENDPOINT: API_ENDPOINT\n} = process.env;\nexport const tasksRequest = () => ({\n  type: TASKS_REQUEST\n});\nexport const tasksSuccess = data => ({\n  type: TASKS_SUCCESS,\n  payload: data\n});\nexport const tasksFailure = error => ({\n  type: TASKS_FAILURE,\n  payload: error\n});\nconst me = {\n  userId: localStorage.getItem(\"userId\"),\n  userName: localStorage.getItem(\"userName\")\n};\nexport const getTasks = path => dispatch => {\n  const token = localStorage.getItem('token');\n  dispatch(tasksRequest());\n\n  if (path === 'me') {\n    axios.get(`${API_ENDPOINT}api/task/list/${me.userId}`, {\n      headers: {\n        'Authorization': `Bearer ${token}`\n      }\n    }).then(response => {\n      if (!response.data.length) {\n        {\n          'No hay tareas creadas';\n        }\n      } else {\n        const data = response.data;\n        dispatch(tasksSuccess(data));\n      }\n    }).catch(error => dispatch(tasksFailure(error)));\n  } else {\n    axios.get(`${API_ENDPOINT}api/task/list`, {\n      headers: {\n        'Authorization': `Bearer ${token}`\n      }\n    }).then(response => {\n      const data = response.data;\n      dispatch(tasksSuccess(data));\n    }).catch(error => dispatch(tasksFailure(error)));\n  }\n};\nexport const deleteTask = id => dispatch => {\n  const token = localStorage.getItem('token');\n  axios.get(`${API_ENDPOINT}api/task/delete/${id}`, {\n    headers: {\n      'Authorization': `Bearer ${token}`\n    }\n  }).then(data => {\n    console.log(data);\n    dispatch(getTasks(\"\"));\n  }).catch(error => dispatch(tasksFailure(error)));\n};\nexport const editTaskStatus = data => dispatch => {\n  const statusArray = [\"New\", \"In process\", \"Finished\"];\n  const token = localStorage.getItem('token');\n  const newStatusIndex = statusArray.indexOf(data.status) > 1 ? 0 : statusArray.indexOf(data.status) + 1;\n  axios.patch(`${API_ENDPOINT}api/task/update/${data.id}`, {\n    title: data.title,\n    importance: data.importance,\n    status: statusArray[newStatusIndex],\n    description: data.description,\n    userName: data.userName,\n    userId: data.userId\n  }, {\n    headers: {\n      'Authorization': `Bearer ${token}`\n    }\n  }).then(data => dispatch(getTasks(\"\"))).catch(error => dispatch(tasksFailure(error)));\n};\nexport const editTaskPriority = data => dispatch => {\n  const priorityArray = [\"Low\", \"Medium\", \"High\"];\n  const token = localStorage.getItem('token');\n  const newPriorityIndex = priorityArray.indexOf(data.importance) > 1 ? 0 : priorityArray.indexOf(data.importance) + 1;\n  axios.patch(`${API_ENDPOINT}api/task/update/${data.id}`, {\n    title: data.title,\n    importance: priorityArray[newPriorityIndex],\n    status: data.status,\n    description: data.description,\n    userName: data.userName,\n    userId: data.userId\n  }, {\n    headers: {\n      'Authorization': `Bearer ${token}`\n    }\n  }).then(data => dispatch(getTasks(\"\"))).catch(error => dispatch(tasksFailure(error)));\n};","map":{"version":3,"names":["TASKS_REQUEST","TASKS_SUCCESS","TASKS_FAILURE","axios","REACT_APP_API_ENDPOINT","API_ENDPOINT","process","env","tasksRequest","type","tasksSuccess","data","payload","tasksFailure","error","me","userId","localStorage","getItem","userName","getTasks","path","dispatch","token","get","headers","then","response","length","catch","deleteTask","id","console","log","editTaskStatus","statusArray","newStatusIndex","indexOf","status","patch","title","importance","description","editTaskPriority","priorityArray","newPriorityIndex"],"sources":["C:/Users/Valeria Rico/Documents/Alkemy/React II/Proyecto React II/Proyecto Avengers/client/src/store/actions/tasksActions.js"],"sourcesContent":["import { TASKS_REQUEST, TASKS_SUCCESS, TASKS_FAILURE } from \"../types\"\r\nimport axios from 'axios'\r\n\r\nconst { REACT_APP_API_ENDPOINT: API_ENDPOINT } = process.env\r\n\r\nexport const tasksRequest = () => ({\r\n   type: TASKS_REQUEST,\r\n})\r\n\r\nexport const tasksSuccess = data => ({\r\n   type: TASKS_SUCCESS,\r\n   payload: data,\r\n})\r\n\r\nexport const tasksFailure = error => ({\r\n   type: TASKS_FAILURE,\r\n   payload: error,\r\n})\r\n\r\nconst me = {userId: localStorage.getItem(\"userId\"), userName: localStorage.getItem(\"userName\")};\r\n\r\n\r\nexport const getTasks = path => dispatch =>{\r\n   const token = localStorage.getItem('token')\r\n   dispatch(tasksRequest())\r\n\r\n   if (path==='me'){\r\n   axios.get(`${API_ENDPOINT}api/task/list/${me.userId}`, {\r\n       headers:  {\r\n         'Authorization': `Bearer ${token}`,\r\n        }            \r\n         \r\n     \r\n   })\r\n      .then(response => {\r\n        if (!response.data.length){\r\n            {'No hay tareas creadas'}\r\n         \r\n        } else{\r\n         const data = response.data\r\n         dispatch(tasksSuccess(data))\r\n        }\r\n      })\r\n      .catch(error => dispatch(tasksFailure(error)))\r\n} else {\r\n   axios.get(`${API_ENDPOINT}api/task/list`, {\r\n      headers:  {\r\n        'Authorization': `Bearer ${token}`,\r\n       }            \r\n        \r\n    \r\n  })\r\n     .then(response => {\r\n        const data = response.data\r\n        dispatch(tasksSuccess(data))\r\n     })\r\n     .catch(error => dispatch(tasksFailure(error)))\r\n\r\n\r\n}\r\n}\r\nexport const deleteTask = id => dispatch => {\r\n   const token = localStorage.getItem('token')\r\n   axios.get(`${API_ENDPOINT}api/task/delete/${id}`, {\r\n       headers:  {\r\n         'Authorization': `Bearer ${token}`,\r\n        }            \r\n         \r\n     })\r\n      .then(data => {\r\n         \r\n      console.log(data)\r\n         dispatch(getTasks(\"\"))}\r\n         )\r\n      .catch(error => dispatch(tasksFailure(error)))\r\n\r\n}\r\n\r\nexport const editTaskStatus = data => dispatch => {\r\n   const statusArray = [\"New\", \"In process\", \"Finished\"]\r\n   const token = localStorage.getItem('token')\r\n\r\n   const newStatusIndex =\r\n      statusArray.indexOf(data.status) > 1\r\n         ? 0\r\n         : statusArray.indexOf(data.status) + 1\r\n\r\n   axios.patch(`${API_ENDPOINT}api/task/update/${data.id}`,\r\n      {title: data.title,\r\n      importance: data.importance,\r\n      status: statusArray[newStatusIndex],\r\n      description: data.description,\r\n      userName: data.userName,\r\n      userId: data.userId},\r\n       {\r\n      headers:  {\r\n         'Authorization': `Bearer ${token}`,\r\n        }            \r\n         \r\n      })\r\n      \r\n      .then(data => dispatch(getTasks(\"\")))\r\n      .catch(error => dispatch(tasksFailure(error)))\r\n}\r\n\r\nexport const editTaskPriority = data => dispatch => {\r\n   const priorityArray = [\"Low\", \"Medium\", \"High\"]\r\n   const token = localStorage.getItem('token')\r\n\r\n   const newPriorityIndex =\r\n      priorityArray.indexOf(data.importance) > 1\r\n         ? 0\r\n         : priorityArray.indexOf(data.importance) + 1\r\n\r\n   axios.patch(`${API_ENDPOINT}api/task/update/${data.id}`,\r\n      {title: data.title,\r\n      importance: priorityArray[newPriorityIndex],\r\n      status: data.status,\r\n      description: data.description,\r\n      userName: data.userName,\r\n      userId: data.userId},\r\n       {\r\n      headers:  {\r\n         'Authorization': `Bearer ${token}`,\r\n        }            \r\n         \r\n      })\r\n      \r\n      .then(data => dispatch(getTasks(\"\")))\r\n      .catch(error => dispatch(tasksFailure(error)))\r\n}"],"mappings":"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"},"metadata":{},"sourceType":"module"}