{"ast":null,"code":"import { TASKS_REQUEST, TASKS_SUCCESS, TASKS_FAILURE } from \"../types\";\nconst {\n  REACT_APP_API_ENDPOINT: API_ENDPOINT\n} = process.env;\nexport const tasksRequest = () => ({\n  type: TASKS_REQUEST\n});\nexport const tasksSuccess = data => ({\n  type: TASKS_SUCCESS,\n  payload: data\n});\nexport const tasksFailure = error => ({\n  type: TASKS_FAILURE,\n  payload: error\n});\nexport const getTasks = path => dispatch => {\n  dispatch(tasksRequest());\n  fetch(`${API_ENDPOINT}task/${path}`, {\n    headers: {\n      \"Content-Type\": \"application/json\",\n      Authorization: \"Bearer \" + localStorage.getItem(\"token\")\n    }\n  }).then(response => response.json()).then(data => {\n    dispatch(tasksSuccess(data.result));\n  }).catch(error => dispatch(tasksFailure(error)));\n};\nexport const deleteTask = id => dispatch => {\n  fetch(`${API_ENDPOINT}task/${id}`, {\n    method: \"DELETE\",\n    headers: {\n      \"Content-Type\": \"application/json\",\n      Authorization: \"Bearer \" + localStorage.getItem(\"token\")\n    }\n  }).then(response => response.json()).then(data => dispatch(getTasks(\"\"))).catch(error => dispatch(tasksFailure(error)));\n};\nexport const editTaskStatus = data => dispatch => {\n  const statusArray = [\"NEW\", \"IN PROGRESS\", \"FINISHED\"];\n  const newStatusIndex = statusArray.indexOf(data.status) > 1 ? 0 : statusArray.indexOf(data.status) + 1;\n  fetch(`${API_ENDPOINT}task/${data._id}`, {\n    method: \"PATCH\",\n    headers: {\n      \"Content-Type\": \"application/json\",\n      Authorization: \"Bearer \" + localStorage.getItem(\"token\")\n    },\n    body: JSON.stringify({\n      task: {\n        title: data.title,\n        importance: data.importance,\n        status: statusArray[newStatusIndex],\n        description: data.description\n      }\n    })\n  }).then(response => response.json()).then(data => dispatch(getTasks(\"\"))).catch(error => dispatch(tasksFailure(error)));\n};","map":{"version":3,"names":["TASKS_REQUEST","TASKS_SUCCESS","TASKS_FAILURE","REACT_APP_API_ENDPOINT","API_ENDPOINT","process","env","tasksRequest","type","tasksSuccess","data","payload","tasksFailure","error","getTasks","path","dispatch","fetch","headers","Authorization","localStorage","getItem","then","response","json","result","catch","deleteTask","id","method","editTaskStatus","statusArray","newStatusIndex","indexOf","status","_id","body","JSON","stringify","task","title","importance","description"],"sources":["C:/Users/Valeria Rico/Documents/Alkemy/React II/Proyecto React II/Proyecto Avengers/client/src/store/actions/tasksActions.js"],"sourcesContent":["import { TASKS_REQUEST, TASKS_SUCCESS, TASKS_FAILURE } from \"../types\"\r\n\r\nconst { REACT_APP_API_ENDPOINT: API_ENDPOINT } = process.env\r\n\r\nexport const tasksRequest = () => ({\r\n   type: TASKS_REQUEST,\r\n})\r\n\r\nexport const tasksSuccess = data => ({\r\n   type: TASKS_SUCCESS,\r\n   payload: data,\r\n})\r\n\r\nexport const tasksFailure = error => ({\r\n   type: TASKS_FAILURE,\r\n   payload: error,\r\n})\r\n\r\nexport const getTasks = path => dispatch => {\r\n   dispatch(tasksRequest())\r\n   fetch(`${API_ENDPOINT}task/${path}`, {\r\n      headers: {\r\n         \"Content-Type\": \"application/json\",\r\n         Authorization: \"Bearer \" + localStorage.getItem(\"token\"),\r\n      },\r\n   })\r\n      .then(response => response.json())\r\n      .then(data => {\r\n         dispatch(tasksSuccess(data.result))\r\n      })\r\n      .catch(error => dispatch(tasksFailure(error)))\r\n}\r\n\r\nexport const deleteTask = id => dispatch => {\r\n   fetch(`${API_ENDPOINT}task/${id}`, {\r\n      method: \"DELETE\",\r\n      headers: {\r\n         \"Content-Type\": \"application/json\",\r\n         Authorization: \"Bearer \" + localStorage.getItem(\"token\"),\r\n      },\r\n   })\r\n      .then(response => response.json())\r\n      .then(data => dispatch(getTasks(\"\")))\r\n      .catch(error => dispatch(tasksFailure(error)))\r\n}\r\n\r\nexport const editTaskStatus = data => dispatch => {\r\n   const statusArray = [\"NEW\", \"IN PROGRESS\", \"FINISHED\"]\r\n\r\n   const newStatusIndex =\r\n      statusArray.indexOf(data.status) > 1\r\n         ? 0\r\n         : statusArray.indexOf(data.status) + 1\r\n\r\n   fetch(`${API_ENDPOINT}task/${data._id}`, {\r\n      method: \"PATCH\",\r\n      headers: {\r\n         \"Content-Type\": \"application/json\",\r\n         Authorization: \"Bearer \" + localStorage.getItem(\"token\"),\r\n      },\r\n      body: JSON.stringify({\r\n         task: {\r\n            title: data.title,\r\n            importance: data.importance,\r\n            status: statusArray[newStatusIndex],\r\n            description: data.description,\r\n         },\r\n      }),\r\n   })\r\n      .then(response => response.json())\r\n      .then(data => dispatch(getTasks(\"\")))\r\n      .catch(error => dispatch(tasksFailure(error)))\r\n}"],"mappings":"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"},"metadata":{},"sourceType":"module"}